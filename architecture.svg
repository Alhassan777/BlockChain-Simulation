<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="800" height="600" xmlns="http://www.w3.org/2000/svg">
  <!-- Define gradients and styles -->
  <defs>
    <linearGradient id="nodeGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#2c3e50;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#34495e;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="componentGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#3498db;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2980b9;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="networkGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#e74c3c;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#c0392b;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="peerGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#95a5a6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#7f8c8d;stop-opacity:1" />
    </linearGradient>
  </defs>

  <!-- Title -->
  <text x="400" y="30" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#2c3e50" text-anchor="middle">
    Blockchain Node Architecture
  </text>

  <!-- Main Node Container -->
  <rect x="150" y="60" width="500" height="380" rx="10" fill="url(#nodeGradient)" stroke="#1a252f" stroke-width="3"/>
  <text x="400" y="90" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#ecf0f1" text-anchor="middle">
    Blockchain Node
  </text>

  <!-- Top Row: Core Components -->
  <g id="blockchain-component">
    <rect x="170" y="110" width="140" height="100" rx="8" fill="url(#componentGradient)" stroke="#2980b9" stroke-width="2"/>
    <text x="240" y="140" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#fff" text-anchor="middle">
      Blockchain
    </text>
    <text x="240" y="160" font-family="Arial, sans-serif" font-size="11" fill="#ecf0f1" text-anchor="middle">
      • Chain Storage
    </text>
    <text x="240" y="175" font-family="Arial, sans-serif" font-size="11" fill="#ecf0f1" text-anchor="middle">
      • State (Balances)
    </text>
    <text x="240" y="190" font-family="Arial, sans-serif" font-size="11" fill="#ecf0f1" text-anchor="middle">
      • Fork Resolution
    </text>
  </g>

  <g id="mempool-component">
    <rect x="330" y="110" width="140" height="100" rx="8" fill="url(#componentGradient)" stroke="#2980b9" stroke-width="2"/>
    <text x="400" y="140" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#fff" text-anchor="middle">
      Mempool
    </text>
    <text x="400" y="160" font-family="Arial, sans-serif" font-size="11" fill="#ecf0f1" text-anchor="middle">
      • Pending Txs
    </text>
    <text x="400" y="175" font-family="Arial, sans-serif" font-size="11" fill="#ecf0f1" text-anchor="middle">
      • Validation
    </text>
    <text x="400" y="190" font-family="Arial, sans-serif" font-size="11" fill="#ecf0f1" text-anchor="middle">
      • Priority Queue
    </text>
  </g>

  <g id="consensus-component">
    <rect x="490" y="110" width="140" height="100" rx="8" fill="url(#componentGradient)" stroke="#2980b9" stroke-width="2"/>
    <text x="560" y="140" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#fff" text-anchor="middle">
      Consensus
    </text>
    <text x="560" y="160" font-family="Arial, sans-serif" font-size="11" fill="#ecf0f1" text-anchor="middle">
      • Proof-of-Work
    </text>
    <text x="560" y="175" font-family="Arial, sans-serif" font-size="11" fill="#ecf0f1" text-anchor="middle">
      • Mining
    </text>
    <text x="560" y="190" font-family="Arial, sans-serif" font-size="11" fill="#ecf0f1" text-anchor="middle">
      • Block Creation
    </text>
  </g>

  <!-- Network Layer -->
  <g id="network-layer">
    <rect x="170" y="230" width="460" height="80" rx="8" fill="url(#networkGradient)" stroke="#c0392b" stroke-width="2"/>
    <text x="400" y="255" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#fff" text-anchor="middle">
      P2P Network Layer (Gossip Protocol)
    </text>
    <text x="400" y="275" font-family="Arial, sans-serif" font-size="11" fill="#ecf0f1" text-anchor="middle">
      • TCP Communication • Message Routing • Duplicate Suppression
    </text>
    <text x="400" y="290" font-family="Arial, sans-serif" font-size="11" fill="#ecf0f1" text-anchor="middle">
      • Peer Discovery • Fault Tolerance
    </text>
  </g>

  <!-- Message Types -->
  <g id="message-types">
    <rect x="170" y="330" width="460" height="90" rx="8" fill="#16a085" stroke="#138d75" stroke-width="2"/>
    <text x="400" y="355" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#fff" text-anchor="middle">
      Message Types
    </text>
    <text x="240" y="375" font-family="Arial, sans-serif" font-size="11" fill="#ecf0f1" text-anchor="middle">
      NEW_TX
    </text>
    <text x="340" y="375" font-family="Arial, sans-serif" font-size="11" fill="#ecf0f1" text-anchor="middle">
      NEW_BLOCK
    </text>
    <text x="460" y="375" font-family="Arial, sans-serif" font-size="11" fill="#ecf0f1" text-anchor="middle">
      GET_CHAIN
    </text>
    <text x="560" y="375" font-family="Arial, sans-serif" font-size="11" fill="#ecf0f1" text-anchor="middle">
      CHAIN_RESPONSE
    </text>
    <text x="400" y="395" font-family="Arial, sans-serif" font-size="10" fill="#ecf0f1" text-anchor="middle" font-style="italic">
      Transaction &amp; Block propagation via gossip
    </text>
  </g>

  <!-- Arrows connecting components to network -->
  <path d="M 240 210 L 240 230" stroke="#3498db" stroke-width="2" fill="none" marker-end="url(#arrowblue)"/>
  <path d="M 400 210 L 400 230" stroke="#3498db" stroke-width="2" fill="none" marker-end="url(#arrowblue)"/>
  <path d="M 560 210 L 560 230" stroke="#3498db" stroke-width="2" fill="none" marker-end="url(#arrowblue)"/>

  <!-- Peer Nodes -->
  <g id="peer-node-1">
    <rect x="50" y="480" width="150" height="80" rx="8" fill="url(#peerGradient)" stroke="#7f8c8d" stroke-width="2"/>
    <text x="125" y="510" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#fff" text-anchor="middle">
      Peer Node 1
    </text>
    <text x="125" y="530" font-family="Arial, sans-serif" font-size="10" fill="#ecf0f1" text-anchor="middle">
      node1
    </text>
    <text x="125" y="545" font-family="Arial, sans-serif" font-size="10" fill="#ecf0f1" text-anchor="middle">
      127.0.0.1:8001
    </text>
  </g>

  <g id="peer-node-2">
    <rect x="325" y="480" width="150" height="80" rx="8" fill="url(#peerGradient)" stroke="#7f8c8d" stroke-width="2"/>
    <text x="400" y="510" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#fff" text-anchor="middle">
      Peer Node 2
    </text>
    <text x="400" y="530" font-family="Arial, sans-serif" font-size="10" fill="#ecf0f1" text-anchor="middle">
      node2
    </text>
    <text x="400" y="545" font-family="Arial, sans-serif" font-size="10" fill="#ecf0f1" text-anchor="middle">
      127.0.0.1:8002
    </text>
  </g>

  <g id="peer-node-3">
    <rect x="600" y="480" width="150" height="80" rx="8" fill="url(#peerGradient)" stroke="#7f8c8d" stroke-width="2"/>
    <text x="675" y="510" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#fff" text-anchor="middle">
      Peer Node 3
    </text>
    <text x="675" y="530" font-family="Arial, sans-serif" font-size="10" fill="#ecf0f1" text-anchor="middle">
      node3
    </text>
    <text x="675" y="545" font-family="Arial, sans-serif" font-size="10" fill="#ecf0f1" text-anchor="middle">
      127.0.0.1:8003
    </text>
  </g>

  <!-- Connection arrows from main node to peers -->
  <path d="M 250 440 L 125 480" stroke="#f39c12" stroke-width="3" fill="none" marker-end="url(#arroworange)"/>
  <path d="M 400 440 L 400 480" stroke="#f39c12" stroke-width="3" fill="none" marker-end="url(#arroworange)"/>
  <path d="M 550 440 L 675 480" stroke="#f39c12" stroke-width="3" fill="none" marker-end="url(#arroworange)"/>

  <!-- Bidirectional indicators -->
  <path d="M 125 480 L 250 440" stroke="#f39c12" stroke-width="2" fill="none" stroke-dasharray="5,5"/>
  <path d="M 400 480 L 400 440" stroke="#f39c12" stroke-width="2" fill="none" stroke-dasharray="5,5"/>
  <path d="M 675 480 L 550 440" stroke="#f39c12" stroke-width="2" fill="none" stroke-dasharray="5,5"/>

  <!-- Arrow markers -->
  <defs>
    <marker id="arrowblue" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#3498db" />
    </marker>
    <marker id="arroworange" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#f39c12" />
    </marker>
  </defs>

  <!-- Legend -->
  <g id="legend">
    <text x="50" y="590" font-family="Arial, sans-serif" font-size="10" fill="#7f8c8d" font-weight="bold">
      Legend:
    </text>
    <line x1="110" y1="585" x2="140" y2="585" stroke="#f39c12" stroke-width="3"/>
    <text x="145" y="590" font-family="Arial, sans-serif" font-size="10" fill="#7f8c8d">
      P2P Connections
    </text>
    <line x1="250" y1="585" x2="280" y2="585" stroke="#3498db" stroke-width="2"/>
    <text x="285" y="590" font-family="Arial, sans-serif" font-size="10" fill="#7f8c8d">
      Internal Flow
    </text>
    <line x1="380" y1="585" x2="410" y2="585" stroke="#f39c12" stroke-width="2" stroke-dasharray="5,5"/>
    <text x="415" y="590" font-family="Arial, sans-serif" font-size="10" fill="#7f8c8d">
      Bidirectional
    </text>
  </g>
</svg>

